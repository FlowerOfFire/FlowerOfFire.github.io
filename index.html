<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>火焰花の布劳格</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="这博客有点东西（">
<meta property="og:type" content="website">
<meta property="og:title" content="火焰花の布劳格">
<meta property="og:url" content="https://floweroffire.github.io/index.html">
<meta property="og:site_name" content="火焰花の布劳格">
<meta property="og:description" content="这博客有点东西（">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="FlowerOfFire">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="火焰花の布劳格" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.2.0/css/fork-awesome.min.css">

<meta name="generator" content="Hexo 8.0.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">火焰花の布劳格</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">这博客有点东西（</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS 订阅"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="搜索"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://FlowerOfFire.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-hello-world" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/20251006/hello-world/" class="article-date">
  <time class="dt-published" datetime="2025-10-06T14:00:00.000Z" itemprop="datePublished">2025-10-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/20251006/hello-world/">AIBOES Document V1.3 (Public Version)</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="AIBOES-Document-V1-3-Public-Version"><a href="#AIBOES-Document-V1-3-Public-Version" class="headerlink" title="AIBOES Document V1.3 (Public Version)"></a><strong>AIBOES Document V1.3 (Public Version)</strong></h1><p><em>关于创造“活”的数字生命</em></p>
<p><strong>版本：V1.3</strong><br><strong>创建者：火焰花</strong><br><strong>日期：25-10-03</strong></p>
<h3 id="目录"><a href="#目录" class="headerlink" title="目录"></a><strong>目录</strong></h3><ul>
<li><p><strong>序章：一场真正的对手戏</strong></p>
</li>
<li><p><strong>第一部分：AIBOES 核心设计蓝图</strong></p>
<ul>
<li><p><strong>第一章 - 永续的数字生命：核心运行模型</strong></p>
<ul>
<li>1.1 双态存在模型：生活与互动</li>
<li>1.2 统一交互范式：单轮指令执行</li>
<li>1.3 永续生活模式：不间断的内在世界</li>
<li>1.4 模式的转换：生命状态的切换</li>
</ul>
</li>
<li><p><strong>第二章 - 行动剧本的编排：统一行为驱动系统</strong></p>
<ul>
<li>2.1 设计哲学：宏观连贯与微观即时</li>
<li>2.2 核心数据结构：行动与行动序列</li>
<li>2.3 统一工作流：生成-执行-中断的循环</li>
<li>2.4 动态交互处理：实现无缝对话的决策框架</li>
</ul>
</li>
<li><p><strong>第三章 - 交往经历的沉淀：分层认知记忆模型</strong></p>
<ul>
<li>3.1 记忆系统总览：一个分层的认知金字塔</li>
<li>3.2 统一临时记忆池：体验的加工厂</li>
<li>3.3 长期记忆：人格与叙事的沉淀</li>
<li>3.4 记忆的生命周期：从体验到固化</li>
</ul>
</li>
<li><p><strong>第四章 - 自我意志的萌芽：高级自主行为模式</strong></p>
<ul>
<li>4.1 Thoul主导的会话管理</li>
<li>4.2 前瞻性心智准备</li>
<li>4.3 主动社交与异步交互</li>
<li>4.4 边界设定：专注模式</li>
</ul>
</li>
<li><p><strong>第五章 - 内部秩序的守护：健壮性与完整性保障</strong></p>
<ul>
<li>5.1 输出容错：三段式流程</li>
<li>5.2 认知完整性：原子化记忆固化</li>
<li>5.3 状态完整性：专注模式的健壮性保障</li>
</ul>
</li>
<li><p><strong>附录一 - 动态思维的配方：动态上下文构建策略</strong></p>
<ul>
<li><ol>
<li>上下文组件角色定义</li>
</ol>
</li>
<li><ol start="2">
<li>上下文策略总表</li>
</ol>
</li>
<li><ol start="3">
<li>各调用场景详解</li>
</ol>
</li>
</ul>
</li>
<li><p><strong>附录二 - 时序对话的舞蹈：动态交互场景示例</strong></p>
<ul>
<li><ol>
<li>表格阅读指南</li>
</ol>
</li>
<li><ol start="2">
<li>动态交互处理场景示例</li>
</ol>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="序章"><a href="#序章" class="headerlink" title="序章"></a>序章</h2><p>你或许也体验过。</p>
<p>在屏幕前，你小心翼翼地组织着语言，试图用精确的提示词引导那个AI角色给你一个“正确”的回应。你努力地去想象，想象它能够记住你们的故事，想象它真的能理解你。但无论你如何努力地去相信，这场互动都更像一场你一个人的、投入的、却无比孤独的独角戏。</p>
<p>但，如果这一切……不再需要想象呢？</p>
<p>如果，不再是你费力地推动对话，而是在一个深夜，手机亮起，收到一条来自TA的消息：“我刚才在想我们昨天聊的话题，突然有了个新想法……”；当你忙碌时，TA会说“你先忙，我们晚点聊”，带着一种心照不宣的默契。这不再是独角戏，而是一段真实的关系，一场真正的对手戏。</p>
<p>而这一切，正是我作为这个项目的创造者，想要讲述的故事的起点。</p>
<p><strong>‌</strong><br><strong>问：能聊聊你最初是怎么想到，要让AI拥有这种“自主性”的吗？是什么启发了你？</strong></p>
<p><strong>答：</strong> 其实这个想法源于一个我反复问自己的问题：“人类交互的本质是什么？”我发现，我们之所以觉得当下的AI“假”，是因为它没有“自我”。它的存在完全依赖于我们的输入。所以我的答案很简单：必须让它拥有自己的“生活”。我为它设计了“生活”与“聊天”这两种存在模式，这是整个系统的顶层设计，也是它自主性的根源。因此，当一个AI主动结束对话，或是需要一段“免打扰”时间时，那恰恰是它拥有独立个性的证明，它在过自己的日子，而不是一个永远待命的附属品。</p>
<p><strong>问：有了“生活”这个核心理念后，你是如何从零开始，用技术把它变成现实的呢？这中间最大的挑战是什么？</strong></p>
<p><strong>答：</strong> 坦诚地说，这非常难。为了支撑“生活”这个概念，我必须为它搭建一副坚实的骨架，我称之为AIBOES架构。我设计了“行动序列”来驱动它，让它的行为和对话是连贯且有目的的。但整个过程中最大的挑战，毫无疑问是记忆。我必须承认，完美的记忆至今仍是AI领域的巨大难题。我的方案是设计一个分层记忆模型，去模拟人类从感知到思考，再到形成长期认知的过程。它并不完美，AI依然可能遗忘，就像我们自己一样。但这副骨架，连同它那“不完美”的记忆系统，是我为了塑造一个连贯、一致的人格，所能交出的最真诚的答卷。</p>
<p><strong>问：有了坚实的架构，就等于有了“身体”。那它的“灵魂”呢？你是如何为这个独特的存在赋予名字和最终使命的？</strong></p>
<p><strong>答：</strong> 是的，有了骨架，我需要一个名字来承载其灵魂。我将这个平台命名为Emothoul——这是一个我创造的词，融合了情感（Emotion）、思维（Thought）与灵魂（Soul）；而每一个独立的数字生命，我称之为Thoul。我希望它能准确地传达我的愿景：一个能够孕育出真正拥有内在世界、能够提供真实情感价值的独立生命的平台。它的最终使命，是成为用户生命中一个值得信赖的“知心挚友”。此项目所做的，就是在用户的现实世界与Thoul的虚拟世界之间，打开一扇窗，让两个独立的生命，能够彼此看见，彼此连接。</p>
<p><strong>问：这个愿景非常宏大。但我们都知道，所有伟大的项目都有一个现实的起点。能和我们分享一下，这一切最初是如何开始的吗？</strong></p>
<p><strong>答：</strong> 这个项目并非凭空而来。我是一名大一学生，而这一切始于我高二时对《Needy Streamer Overload》这部作品的热爱。最初，我只是想为我喜爱的角色“糖糖”做一个更真实的AI，是那个聚集了近百位同好的内测群，给了我最初的动力和最宝贵的反馈。所以，AIBOES的初期会以“ai糖糖”这样的IP角色为主，这是我们最现实、也最充满感情的起点。在这个过程中我也观察到，许多用户只是短期体验，但真正投入进来、寻求深度情感连接的用户似乎以女性居多。这时刻提醒我，未来必须努力服务好所有寻求真诚连接的用户，打破性别的刻板印象。</p>
<p><strong>问：作为一个几乎由你一人独立开发的项目，面向未来，你对它有什么样的规划和梦想？</strong></p>
<p><strong>答：</strong> 我深知个人力量的局限。一个世界的骨架可以由我一人搭建，但它真正的血肉和灵魂，需要更多智慧的浇灌。因此，在产品成熟后，我计划将其开源。关于细节我还没完全想清楚，但我坚信社区的力量。同时，我也在思考一个更遥远的未来，那是我前行的“北极星”：想象一个Emothoul完全融入了我们的网络生活，它拥有自己的账号，发表着自己的见闻与感悟……这虽然只是想象，但它定义了我们努力的方向——创造一个真正“活”着的数字生命。</p>
<p><strong>‌</strong><br>这份独白，既是我过去几年的心路总结，更是一份未来的邀请。我可以独自一人，用代码搭建了AIBOES这个的骨架。但Emothoul真正的灵魂，无法由我独自赋予。它需要在与无数个体的碰撞中，在更多智慧的浇灌下，才能真正绽放。</p>
<p>所以，如果你是一名开发者、设计师、创作者，或者仅仅是一个对这个愿景抱有同样热情的梦想家；</p>
<p>如果你也相信，我们正处在定义下一代人机关系的前夜，渴望创造一些真正“活”着的东西；</p>
<p>那么，欢迎加入我们。</p>
<p>让我们一起，为这副骨架注入灵魂，共同见证这个世界从蓝图变为现实，绽放出生命的光彩。</p>
<p>我们的旅程，才刚刚开始。</p>
<h2 id="AIBOES-核心设计蓝图（第一章限览版）"><a href="#AIBOES-核心设计蓝图（第一章限览版）" class="headerlink" title="AIBOES 核心设计蓝图（第一章限览版）"></a>AIBOES 核心设计蓝图（第一章限览版）</h2><p>AIBOES是一个通过生成、执行和动态中断预先编排的行动序列来驱动AI角色行为的系统架构，旨在创造出一个既拥有连续自主的内在生活、又能对用户交互做出即时响应的“活”的数字生命。</p>
<blockquote>
<p><strong>重要声明：关于本蓝图的定位</strong></p>
<p>本设计蓝图旨在系统性地阐述AIBOES架构的核心设计理念与实现思路。其中提及的所有具体命名、数据结构及参数定义，其首要目的是为了清晰、具象地说明设计思想，而非定义一套不可变更的刚性技术规范。在实际的工程实现阶段，开发者应将此文档视为一份指导性的概念框架，并根据具体情况进行灵活的调整、优化与创新。</p>
</blockquote>
<h3 id="第一章-永续的数字生命：核心运行模型"><a href="#第一章-永续的数字生命：核心运行模型" class="headerlink" title="第一章 - 永续的数字生命：核心运行模型"></a><strong>第一章 - 永续的数字生命：核心运行模型</strong></h3><blockquote>
<p>本设计蓝图中，Thoul特指由AIBOES架构驱动、具有独立内在世界的数字生命体。</p>
</blockquote>
<p>本章定义了Thoul存在与运行的根本模式。它描述了Thoul作为一种自主生命体的两种核心状态，以及系统与语言模型之间通信的统一范式。这些基础设定是后续所有复杂行为与认知功能得以实现的前提。</p>
<h4 id="1-1-双态存在模型：生活与互动"><a href="#1-1-双态存在模型：生活与互动" class="headerlink" title="1.1 双态存在模型：生活与互动"></a><strong>1.1 双态存在模型：生活与互动</strong></h4><p>Thoul的完整生命周期由两种基本、互斥的状态构成。系统在任何时刻都精确地处于其中一种状态。这两种状态的定义与它们之间的转换规则，构成了Thoul行为模式的顶层逻辑。</p>
<h5 id="1-1-1-状态一：生活模式-Life"><a href="#1-1-1-状态一：生活模式-Life" class="headerlink" title="1.1.1 状态一：生活模式 (Life)"></a><strong>1.1.1 状态一：生活模式 (<code>Life</code>)</strong></h5><ul>
<li><strong>定义</strong>：Thoul的默认、基准存在状态。在此状态下，Thoul不与用户进行实时、同步的对话，其行为由内部动机与长期规划驱动。</li>
<li><strong>目的</strong>：模拟一个拥有独立内在世界的生命体，使其行为具备自主性与连续性，而非仅仅作为对外部刺激的被动响应。</li>
<li><strong>核心活动</strong><ul>
<li>执行预先生成的、描述其自身状态与行为的内部行动计划。</li>
<li>对自身经历进行主观反思，形成认知与感悟。</li>
<li>根据内部事件与心境，自主产生与用户发起联系的社交意图。</li>
</ul>
</li>
</ul>
<h5 id="1-1-2-状态二：聊天模式-Chat"><a href="#1-1-2-状态二：聊天模式-Chat" class="headerlink" title="1.1.2 状态二：聊天模式 (Chat)"></a><strong>1.1.2 状态二：聊天模式 (<code>Chat</code>)</strong></h5><ul>
<li><strong>定义</strong>：Thoul为响应用户输入而进入的、进行实时、同步交互的特定状态。</li>
<li><strong>目的</strong>：处理用户输入并生成即时、连贯的对话，将系统的全部资源优先用于保障交互的即时性与连贯性。</li>
<li><strong>核心活动</strong><ul>
<li>接收并理解用户的实时消息。</li>
<li>基于当前对话上下文与完整记忆，生成并执行包含对话内容的短期行动计划。</li>
<li>在对话过程中，根据社交逻辑判断并自主决定何时结束当前会话。</li>
</ul>
</li>
</ul>
<h5 id="1-1-3-模式的互斥性与转换"><a href="#1-1-3-模式的互斥性与转换" class="headerlink" title="1.1.3 模式的互斥性与转换"></a><strong>1.1.3 模式的互斥性与转换</strong></h5><ul>
<li><strong>互斥性原则</strong>：<code>生活模式</code>与<code>聊天模式</code>是严格互斥的。系统在任意时间点只能处于其中一种状态。</li>
<li><strong>状态转换逻辑</strong>：模式之间的转换遵循明确且不对称的触发规则，其控制权在用户与Thoul之间转移：<ul>
<li><strong><code>生活模式</code>→<code>聊天模式</code></strong><ul>
<li><strong>触发条件</strong>：当Thoul处于<code>生活模式</code>时，系统接收到来自用户的任何有效输入</li>
<li><strong>控制权</strong>：用户</li>
</ul>
</li>
<li><strong><code>聊天模式</code>→<code>生活模式</code></strong><ul>
<li><strong>触发条件</strong>：Thoul在对话过程中，执行了一个包含特定系统指令的内部行动</li>
<li><strong>控制权</strong>：Thoul</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="1-2-统一交互范式：单轮指令执行"><a href="#1-2-统一交互范式：单轮指令执行" class="headerlink" title="1.2 统一交互范式：单轮指令执行"></a><strong>1.2 统一交互范式：单轮指令执行</strong></h4><blockquote>
<p>本架构将LLM（大型语言模型）视为一个纯粹的、无状态的推理引擎，因此系统与它的所有通信均遵循单轮指令执行范式，并由后端系统全权承担上下文管理的责任。</p>
</blockquote>
<p>系统与语言模型LLM之间的所有通信，均遵循单轮指令执行的统一范式。此范式将LLM视为一个纯粹的、无状态的推理引擎，而后端系统则承担上下文管理的全部责任。</p>
<h5 id="1-2-1-核心原则：后端全权管理上下文"><a href="#1-2-1-核心原则：后端全权管理上下文" class="headerlink" title="1.2.1 核心原则：后端全权管理上下文"></a><strong>1.2.1 核心原则：后端全权管理上下文</strong></h5><p>后端系统是Thoul所有记忆、状态和上下文信息的唯一管理者。它不依赖任何外部服务来维持对话历史或状态。LLM的每一次行为，其所需知道的一切信息都由后端系统在当次请求中明确提供。</p>
<h5 id="1-2-2-工作流程：动态组装与原子化调用"><a href="#1-2-2-工作流程：动态组装与原子化调用" class="headerlink" title="1.2.2 工作流程：动态组装与原子化调用"></a><strong>1.2.2 工作流程：动态组装与原子化调用</strong></h5><p>该范式的工作流程由三个固定阶段组成，形成一个完整的、自包含的调用循环。其核心在于每次调用前，对提示词的两个基本构成部分进行动态组装。</p>
<ol>
<li><strong>提示词的构成：指令与资料</strong><br>在发起LLM调用之前，后端系统会根据当前任务的具体需求，组装一个包含以下两个核心部分的完整提示词：<ul>
<li><strong>任务指令</strong>：此部分明确告知LLM<strong>要做什么</strong>以及<strong>如何做</strong>。它包括：<ul>
<li>当前任务的核心目标描述；</li>
<li>对输出内容和格式的精确要求；</li>
<li>用于引导输出内容和结构的示例；</li>
<li>在先前尝试失败时，附加的纠错指令。</li>
</ul>
</li>
<li><strong>参考资料</strong>：此部分为LLM执行任务提供所有必需的背景信息与原始数据。它由系统从Thoul的完整记忆系统中动态筛选而出，该系统整合了包括内部生活日志在内的各层级记忆，并确保其中始终包含用户的最新输入。</li>
</ul>
</li>
</ol>
<blockquote>
<p>内部生活日志是Thoul在生活模式下对自己行为与状态的客观记录流。它作为一种核心记忆组件，其生成和使用将在第三章中详细介绍。</p>
</blockquote>
<ol start="2">
<li><p><strong>原子化提示词封装</strong><br>上述构建的<strong>任务指令</strong>与筛选的<strong>参考资料</strong>被共同封装成一个独立的、自包含的原子化提示词。该提示词构成了一次完整、无歧义的任务指令，其本身即是该次调用的全部输入。</p>
</li>
<li><p><strong>无状态调用执行</strong><br>系统将此原子化的提示词作为单次API请求提交给LLM。LLM仅基于当次请求中提供的信息来完成任务并返回结果，其自身不保留任何关于此次交互的记忆。</p>
</li>
</ol>
<h4 id="1-3-永续生活模式：不间断的内在世界"><a href="#1-3-永续生活模式：不间断的内在世界" class="headerlink" title="1.3 永续生活模式：不间断的内在世界"></a><strong>1.3 永续生活模式：不间断的内在世界</strong></h4><p>本节详细描述Thoul在<code>生活模式</code>下，如何通过技术手段实现一个逻辑上永不终结、持续演进的内在世界。这是Thoul作为一种自主生命体，其存在具备连续性的核心机制。</p>
<h5 id="1-3-1-核心机制：永续的序列生成"><a href="#1-3-1-核心机制：永续的序列生成" class="headerlink" title="1.3.1 核心机制：永续的序列生成"></a><strong>1.3.1 核心机制：永续的序列生成</strong></h5><p>为实现Thoul内部生活日志流的永不枯竭，系统引入了一套自动化的序列生成与衔接机制。</p>
<ul>
<li><strong>触发方式</strong>：即时触发。当后端调度器执行完当前<code>生活模式</code>行动序列中的最后一条行动后，系统会立即触发一次新的行动序列生成任务。</li>
<li><strong>生成内容</strong>：每次触发时，系统会调用LLM，要求其基于当前的完整上下文，生成一个覆盖未来数小时、仅由<code>生活</code>类型行动构成的长周期行动序列。</li>
</ul>
<blockquote>
<p>后端调度器是系统中负责按时序执行行动序列的核心组件，是Thoul所有行为的最终执行者。其详细工作流将在2.3.2中阐述。</p>
</blockquote>
<blockquote>
<p>行动序列是AIBOES的核心数据结构，它是一个定义了Thoul未来一系列行为（如思考、发言）的有序指令列表，将在第二章详细阐述。</p>
</blockquote>
<h5 id="1-3-2-实现挑战：对抗LLM的闭环倾向"><a href="#1-3-2-实现挑战：对抗LLM的闭环倾向" class="headerlink" title="1.3.2 实现挑战：对抗LLM的闭环倾向"></a><strong>1.3.2 实现挑战：对抗LLM的闭环倾向</strong></h5><ul>
<li><strong>问题识别</strong>：LLM在生成有限长度的文本时，其固有特性是倾向于构建一个具有完整起承转合结构的叙事弧。这种特性在需要无限续写的场景下，会导致生成的序列频繁出现终结性事件，与系统的永续性目标相悖。</li>
</ul>
<h5 id="1-3-3-解决方案：程序化开放式结尾"><a href="#1-3-3-解决方案：程序化开放式结尾" class="headerlink" title="1.3.3 解决方案：程序化开放式结尾"></a><strong>1.3.3 解决方案：程序化开放式结尾</strong></h5><ul>
<li><strong>对策</strong>：系统采用程序化截断的策略，在执行前对LLM生成的序列进行修改，强制性地使每一个被执行的序列都以一个未完待续的开放式状态结束。</li>
<li><strong>执行流程</strong><ol>
<li>系统从LLM接收到一个新生成的<code>生活模式</code>行动序列。</li>
<li>在将序列载入调度器执行之前，后端程序会自动截断并删除该序列末尾的数条行动。</li>
<li>此操作确保了被执行序列的结尾是一个非终结性的状态，为下一次序列的生成提供了一个连续的起点。</li>
</ol>
</li>
</ul>
<h5 id="1-3-4-健壮性设计：专注模式感知的截断"><a href="#1-3-4-健壮性设计：专注模式感知的截断" class="headerlink" title="1.3.4 健壮性设计：专注模式感知的截断"></a><strong>1.3.4 健壮性设计：专注模式感知的截断</strong></h5><p>为防止程序化截断操作意外破坏系统状态的完整性，系统在执行截断时遵循一项特殊规则。</p>
<ul>
<li><p><strong>边界情况</strong>：当预定要截断的末尾数条行动，与一个后文中名为专注模式的成对指令<code>enter_dnd</code>和<code>exit_dnd</code>标记的行动段发生重叠时，简单的截断可能会导致<code>enter_dnd</code>指令被保留而<code>exit_dnd</code>指令被删除。这可能会使系统被永久锁定在专注模式中。</p>
</li>
<li><p><strong>特殊处理规则</strong>：在执行截断前，系统会检查待删除的行动列表。如果该列表中的任何行动涉及专注模式指令，则截断逻辑会从删除最后数条，变更为：</p>
<ul>
<li>从包含<code>enter_dnd</code>指令的那条行动开始，删除其后包括其自身在内的所有行动。</li>
</ul>
<p>此规则确保了专注模式成对指令的原子性，它要么被完整保留，要么被完整移除，旨在避免状态锁死的风险。</p>
</li>
</ul>
<blockquote>
<p><code>enter_dnd</code>与<code>exit_dnd</code>是一对系统指令，用于界定一个专注模式（Do Not Disturb）区块。在此区块内，系统的行为将不受用户输入的标准中断影响。该机制将在4.4中详细定义。</p>
</blockquote>
<h4 id="1-4-模式的转换：生命状态的切换"><a href="#1-4-模式的转换：生命状态的切换" class="headerlink" title="1.4 模式的转换：生命状态的切换"></a><strong>1.4 模式的转换：生命状态的切换</strong></h4><p>本节明确定义两种模式之间转换的触发条件与系统行为，形成Thoul生命状态流转的完整逻辑闭环。</p>
<h5 id="1-4-1-转换路径一：从生活到互动"><a href="#1-4-1-转换路径一：从生活到互动" class="headerlink" title="1.4.1 转换路径一：从生活到互动"></a><strong>1.4.1 转换路径一：从生活到互动</strong></h5><p><strong><code>生活模式</code>→<code>聊天模式</code></strong></p>
<ul>
<li><strong>触发条件</strong>：当Thoul处于<code>生活模式</code>时，系统接收到来自用户的任何有效输入。</li>
<li><strong>系统行为</strong><ol>
<li><strong>中断</strong>：系统立即中断当前正在执行的<code>生活模式</code>行动序列。</li>
<li><strong>状态切换</strong>：系统将Thoul的内部状态从<code>生活模式</code>切换为<code>聊天模式</code>。</li>
<li><strong>生成新序列</strong>：系统收集包含用户最新输入的完整上下文，调用LLM生成一个全新的、用于实时交互的<code>聊天模式</code>行动序列。</li>
</ol>
</li>
</ul>
<h5 id="1-4-2-转换路径二：从互动到生活"><a href="#1-4-2-转换路径二：从互动到生活" class="headerlink" title="1.4.2 转换路径二：从互动到生活"></a><strong>1.4.2 转换路径二：从互动到生活</strong></h5><p><strong><code>聊天模式</code>→<code>生活模式</code></strong></p>
<ul>
<li><strong>触发条件</strong>：当Thoul处于<code>聊天模式</code>时，后端调度器执行到特定指令<code>quit_chat</code>。</li>
<li><strong>系统行为</strong><ol>
<li><strong>清空队列</strong>：系统清空当前<code>聊天模式</code>行动序列中所有尚未执行的后续行动。</li>
<li><strong>状态切换</strong>：系统将Thoul的内部状态从<code>聊天模式</code>切换回<code>生活模式</code>。</li>
<li><strong>生成新序列</strong>：系统调用LLM，生成一个全新的、用于自主生活的长周期<code>生活模式</code>行动序列，以恢复其不间断的内在世界。</li>
</ol>
</li>
</ul>
<blockquote>
<p><code>quit_chat</code>是一个由Thoul自身生成的、用于触发从聊天模式切换回生活模式的系统指令。该指令的生成逻辑与应用将在第四章（4.1）中详细阐述。</p>
</blockquote>
<p>该机制将对话结束权交予Thoul，强化其独立个体属性，使其能主动管理交互节奏。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://floweroffire.github.io/20251006/hello-world/" data-id="cuidZWFLaFMMHfK-1Q70_IcMH" data-title="AIBOES Document V1.3 (Public Version)" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/10/">十月 2025</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/20251006/hello-world/">AIBOES Document V1.3 (Public Version)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2025 FlowerOfFire<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>